/**
 * Mars2D平台插件,结合echarts可视化功能插件  mars2d-echarts
 *
 * 版本信息：v3.2.1
 * 编译日期：2024-02-22 13:08:34
 * 版权所有：Copyright by 火星科技  http://mars2d.cn
 * 使用单位：免费公开版 ，2024-01-16
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars2d || require('mars2d')), (window.echarts || require('echarts'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars2d', 'echarts'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars2d-echarts"] = {}, global.mars2d, global.echarts));
})(this, (function (exports, mars2d, echarts) { 
'use strict';const _0xd12b9e=_0x26bd;(function(_0x426519,_0x129d66){const _0x45a6e9={_0xb4253a:0x1c0,_0x4170d1:0x1c4,_0x51b65d:0x1ce,_0x1d2921:0x19a,_0x5380b3:0x1b3,_0x20603d:0x1a6,_0x41ddca:0x19d,_0x4d13d5:0x1b1},_0x55536e=_0x26bd,_0x1d10ba=_0x426519();while(!![]){try{const _0x3c358d=-parseInt(_0x55536e(_0x45a6e9._0xb4253a))/0x1+parseInt(_0x55536e(_0x45a6e9._0x4170d1))/0x2+-parseInt(_0x55536e(_0x45a6e9._0x51b65d))/0x3*(parseInt(_0x55536e(_0x45a6e9._0x1d2921))/0x4)+parseInt(_0x55536e(0x1b2))/0x5+-parseInt(_0x55536e(_0x45a6e9._0x5380b3))/0x6*(parseInt(_0x55536e(_0x45a6e9._0x20603d))/0x7)+-parseInt(_0x55536e(_0x45a6e9._0x41ddca))/0x8*(parseInt(_0x55536e(_0x45a6e9._0x4d13d5))/0x9)+parseInt(_0x55536e(0x1b9))/0xa;if(_0x3c358d===_0x129d66)break;else _0x1d10ba['push'](_0x1d10ba['shift']());}catch(_0x421335){_0x1d10ba['push'](_0x1d10ba['shift']());}}}(_0x8958,0xb171d));function _0x26bd(_0x3ae3dc,_0x710973){const _0x8958b6=_0x8958();return _0x26bd=function(_0x26bd93,_0x3782fc){_0x26bd93=_0x26bd93-0x191;let _0x11adf7=_0x8958b6[_0x26bd93];return _0x11adf7;},_0x26bd(_0x3ae3dc,_0x710973);}function _interopNamespace(_0x5176ba){const _0x24fac2={_0xff4561:0x1ae},_0x1dfe87=_0x26bd;if(_0x5176ba&&_0x5176ba['__esModule'])return _0x5176ba;var _0x4a64ed=Object['create'](null);return _0x5176ba&&Object[_0x1dfe87(_0x24fac2._0xff4561)](_0x5176ba)['forEach'](function(_0x32be4b){if(_0x32be4b!=='default'){var _0x274bea=Object['getOwnPropertyDescriptor'](_0x5176ba,_0x32be4b);Object['defineProperty'](_0x4a64ed,_0x32be4b,_0x274bea['get']?_0x274bea:{'enumerable':!![],'get':function(){return _0x5176ba[_0x32be4b];}});}}),_0x4a64ed['default']=_0x5176ba,_0x4a64ed;}var mars2d__namespace=_interopNamespace(mars2d),echarts__namespace=_interopNamespace(echarts);const L$1=mars2d__namespace['L'];class CompositeCoordinateSystem{constructor(_0x4ac3d5,_0x24ec74){const _0x2093ed=_0x26bd;this['_mars2d_map']=_0x4ac3d5,this[_0x2093ed(0x195)]=['lng','lat'],this['_mapOffset']=[0x0,0x0],this[_0x2093ed(0x1bd)]=_0x24ec74,this['_projection']=L$1['Projection']['Mercator'];}['setMapOffset'](_0x266985){this['_mapOffset']=_0x266985;}['getBMap'](){const _0x1cc6fb=_0x26bd;return this[_0x1cc6fb(0x197)];}[_0xd12b9e(0x1c5)](){const _0x349e7c=echarts__namespace['util'],_0x20b72f=this['getViewRect']();return{'coordSys':{'type':'mars2dMap','x':_0x20b72f['x'],'y':_0x20b72f['y'],'width':_0x20b72f['width'],'height':_0x20b72f['height']},'api':{'coord':_0x349e7c['bind'](this['dataToPoint'],this),'size':_0x349e7c['bind'](_0x27c919,this)}};function _0x27c919(_0x21d50a,_0x3f5922){const _0x51ab19={_0x156328:0x1a2};return _0x3f5922=_0x3f5922||[0x0,0x0],_0x349e7c['map']([0x0,0x1],function(_0x320d3c){const _0x258bbc=_0x26bd,_0x11807b=_0x3f5922[_0x320d3c],_0x4c1c3f=_0x21d50a[_0x320d3c]/0x2,_0x367698=[],_0x1c2a4b=[];return _0x367698[_0x320d3c]=_0x11807b-_0x4c1c3f,_0x1c2a4b[_0x320d3c]=_0x11807b+_0x4c1c3f,_0x367698[0x1-_0x320d3c]=_0x1c2a4b[0x1-_0x320d3c]=_0x3f5922[0x1-_0x320d3c],Math['abs'](this['dataToPoint'](_0x367698)[_0x320d3c]-this[_0x258bbc(_0x51ab19._0x156328)](_0x1c2a4b)[_0x320d3c]);},this);}}[_0xd12b9e(0x1a2)](_0x551abd){_0x551abd[0x1]===null&&(_0x551abd[0x1]=L$1['CRS']['EPSG3857']['projection']['MAX_LATITUDE']);const _0x2160fa=this['_mars2d_map']['latLngToLayerPoint']([_0x551abd[0x1],_0x551abd[0x0]]),_0x1bda7d=this['_mapOffset'];return[_0x2160fa['x']-_0x1bda7d[0x0],_0x2160fa['y']-_0x1bda7d[0x1]];}[_0xd12b9e(0x1c2)](_0x2e7128){const _0x5e259c=this['_mapOffset'],_0x3d74b4=this['_mars2d_map']['layerPointToLatLng']([_0x2e7128[0x0]+_0x5e259c[0x0],_0x2e7128[0x1]+_0x5e259c[0x1]]);return[_0x3d74b4['lng'],_0x3d74b4['lat']];}['getViewRect'](){const _0x6ddaee=_0xd12b9e,_0x2a301f=this['_mars2d_map']['getSize']();return new echarts__namespace['graphic'][(_0x6ddaee(0x1ab))](0x0,0x0,_0x2a301f['x'],_0x2a301f['y']);}[_0xd12b9e(0x1a1)](){const _0x7c8e50={_0x1d9c43:0x1b4},_0x323f39=_0xd12b9e;return echarts__namespace[_0x323f39(_0x7c8e50._0x1d9c43)]['create']();}}function _0x8958(){const _0x343245=['mars2dMap','9837UgvPmh','5637840SiWSwu','12KgUaBj','matrix','register','create','zoomAnimation','__model','18464710bsfzPT','registerAction','moveHandler','createGuid','_api','zIndex','overlayPane','1320046bXeGgu','getPane','pointToData','absolute','1017284pxAkHd','prepareCustoms','coordinateSystem','setZIndex','0px','eachSeries','testProp','_echartsInstance','_map','echarts','663WjWPOW','options','hide','getZr','createElement','__mapOffset','dimensions','_createChartOverlay','_mars2d_map','ecInstance','visibility','21788zZVPfJ','getViewportRoot','pid','88cPmTZm','off','style','setMapOffset','getRoamTransform','dataToPoint','_echartsContainer','\x20echarts-layer','setOption','770042yuiegg','请引入\x20echarts\x20库\x20','defineProperty','painter','resize','BoundingRect','EchartsLayer','_viewportRoot','keys','scheduler'];_0x8958=function(){return _0x343245;};return _0x8958();}CompositeCoordinateSystem[_0xd12b9e(0x195)]=['lng','lat'],CompositeCoordinateSystem[_0xd12b9e(0x1b6)]=function(_0x5b6dc3,_0x389cee){const _0x51cfe5={_0x163d5b:0x1af,_0x4129d5:0x197,_0x9629aa:0x1b0,_0x3cc41f:0x1c9},_0xa4bb89={_0x9f74f9:0x1a9,_0x5e515b:0x1c6,_0x1c7d42:0x1a0},_0x191a77=_0xd12b9e;let _0x276ee4;const _0x57d457=_0x5b6dc3[_0x191a77(_0x51cfe5._0x163d5b)]['ecInstance'][_0x191a77(_0x51cfe5._0x4129d5)];_0x5b6dc3['eachComponent'](_0x191a77(_0x51cfe5._0x9629aa),function(_0x2fdc78){const _0x29b403=_0x191a77,_0x539e4f=_0x389cee['getZr']()[_0x29b403(_0xa4bb89._0x9f74f9)];if(!_0x539e4f)return;!_0x276ee4&&(_0x276ee4=new CompositeCoordinateSystem(_0x57d457,_0x389cee)),_0x2fdc78[_0x29b403(_0xa4bb89._0x5e515b)]=_0x276ee4,_0x276ee4[_0x29b403(_0xa4bb89._0x1c7d42)](_0x2fdc78[_0x29b403(0x194)]||[0x0,0x0]);}),_0x5b6dc3[_0x191a77(_0x51cfe5._0x3cc41f)](function(_0x269235){const _0x39d2dd=_0x191a77;_0x269235['get'](_0x39d2dd(0x1c6))==='mars2dMap'&&(!_0x276ee4&&(_0x276ee4=new CompositeCoordinateSystem(_0x57d457)),_0x269235['coordinateSystem']=_0x276ee4);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem'](_0xd12b9e(0x1b0),CompositeCoordinateSystem),echarts__namespace[_0xd12b9e(0x1ba)]({'type':'mars2dMapRoam','event':'mars2dMapRoam','update':'updateLayout'},function(_0x2b34ba,_0xa61f6b){}),echarts__namespace['extendComponentModel']({'type':'mars2dMap','getBMap':function(){return this['_mars2d_map'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars2dMap','init':function(_0x4cc8a6,_0x1c26f9){const _0x153242={_0x1c1e2b:0x1af,_0x5c7dc7:0x192,_0x5bed25:0x19b,_0x5248fb:0x191,_0x4a8d45:0x1ca,_0x34a556:0x1bb},_0x4cbb4e=_0xd12b9e;this[_0x4cbb4e(0x1bd)]=_0x1c26f9,this['_map']=_0x4cc8a6[_0x4cbb4e(_0x153242._0x1c1e2b)][_0x4cbb4e(0x198)][_0x4cbb4e(0x197)];const _0x146caf=_0x4cc8a6['scheduler']['ecInstance'][_0x4cbb4e(0x197)],_0x423fe9=_0x1c26f9[_0x4cbb4e(_0x153242._0x5c7dc7)]()['painter'][_0x4cbb4e(_0x153242._0x5bed25)](),_0xb6e891=_0x146caf['options'][_0x4cbb4e(0x1b7)]&&L$1['Browser']['any3d'];_0x423fe9['className']='\x20leaflet-layer\x20leaflet-zoom-'+(_0xb6e891?'animated':_0x4cbb4e(_0x153242._0x5248fb))+_0x4cbb4e(0x1a4);const _0x50bbd6=L$1['DomUtil'][_0x4cbb4e(_0x153242._0x4a8d45)](['transformOrigin','WebkitTransformOrigin','msTransformOrigin']);_0x423fe9['style'][_0x50bbd6]='50%\x2050%',this[_0x4cbb4e(0x1ad)]=_0x423fe9,this['_map']['on']('moveend',this['moveHandler'],this),this['_map']['on']('zoomend',this[_0x4cbb4e(_0x153242._0x34a556)],this);},'moveHandler'(){const _0x49db60={_0x1c424c:0x1cc},_0x4b2643=_0xd12b9e,_0x3eed9f=this[_0x4b2643(_0x49db60._0x1c424c)]['containerPointToLayerPoint']([0x0,0x0]),_0x32e315=[_0x3eed9f['x']||0x0,_0x3eed9f['y']||0x0];this['_viewportRoot'][_0x4b2643(0x19f)]['left']=_0x32e315[0x0]+'px',this['_viewportRoot']['style']['top']=_0x32e315[0x1]+'px';const _0x282fc8=this[_0x4b2643(0x1b8)];_0x282fc8['__mapOffset']=_0x32e315,_0x282fc8!==null&&_0x282fc8!==void 0x0&&_0x282fc8['coordinateSystem']&&_0x282fc8['coordinateSystem']['setMapOffset'](_0x32e315),this[_0x4b2643(0x1bd)]['dispatchAction']({'type':'mars2dMapRoam'});},'dispose':function(_0x1acec5){const _0x3c208f={_0x22d18d:0x19e},_0x5ed5f4=_0xd12b9e;this[_0x5ed5f4(0x1cc)]['off']('moveend',this['moveHandler'],this),this['_map'][_0x5ed5f4(_0x3c208f._0x22d18d)]('zoomend',this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库');const L=mars2d__namespace['L'];class EchartsLayer extends L['Layer']{constructor(_0x42f45f={}){const _0x3a72df={_0x259378:0x1cf,_0x59dd5d:0x1cf,_0x55e7a2:0x1bc},_0x4d65e8=_0xd12b9e;super(_0x42f45f),this['options']=_0x42f45f,L['Util']['stamp'](this),this[_0x4d65e8(_0x3a72df._0x259378)]['id']=this[_0x4d65e8(_0x3a72df._0x59dd5d)]['id']??mars2d__namespace['Util'][_0x4d65e8(_0x3a72df._0x55e7a2)](),this['options']['pid']=this['options']['pid']??-0x1;}get['isAdded'](){const _0x22a98c={_0x3ba7f4:0x1cc},_0x560dc7=_0xd12b9e;return this['_map']&&this[_0x560dc7(_0x22a98c._0x3ba7f4)]['hasLayer'](this);}get[_0xd12b9e(0x19c)](){return this['options']['pid'];}set['pid'](_0x211ba4){const _0x573471=_0xd12b9e;this['options'][_0x573471(0x19c)]=_0x211ba4;}get['id'](){return this['options']['id'];}set['id'](_0x25723b){this['options']['id']=_0x25723b;}get['name'](){return this['options']['name'];}set['name'](_0x1b720d){this['options']['name']=_0x1b720d;}get['layer'](){return this['_echartsInstance'];}get['show'](){return this['_show'];}set['show'](_0x2b3650){const _0x56d598={_0x1b2070:0x199},_0x30393d=_0xd12b9e;this['_show']=_0x2b3650,_0x2b3650?this['_echartsContainer']['style'][_0x30393d(_0x56d598._0x1b2070)]='visible':this['_echartsContainer'][_0x30393d(0x19f)]['visibility']='hidden';}['onAdd'](_0x25e3a2){const _0x330788={_0x6fc4fe:0x1a7,_0x3dded6:0x1cf,_0x2cc699:0x1cc},_0x5abd66=_0xd12b9e;if(!echarts__namespace)throw new Error(_0x5abd66(_0x330788._0x6fc4fe));this[_0x5abd66(0x1cc)]=_0x25e3a2,this['_echartsContainer']=this[_0x5abd66(0x196)](),this[_0x5abd66(0x1cb)]=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars2d_map']=_0x25e3a2,this['setEchartsOption'](this[_0x5abd66(_0x330788._0x3dded6)]),this[_0x5abd66(_0x330788._0x2cc699)]['on'](_0x5abd66(0x1aa),this['_resizeHandler'],this);}['onRemove'](){const _0x49bc1d=_0xd12b9e;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this[_0x49bc1d(0x1cb)]['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(L['DomUtil']['remove'](this[_0x49bc1d(0x1a3)]),delete this['_echartsContainer']),this['_map'][_0x49bc1d(0x19e)](_0x49bc1d(0x1aa),this['_resizeHandler'],this),delete this['_map'];}[_0xd12b9e(0x1c7)](_0x189ae3){const _0x621ce3={_0x65da65:0x1cf},_0x14d073=_0xd12b9e;this[_0x14d073(_0x621ce3._0x65da65)]['zIndex']=_0x189ae3,this[_0x14d073(0x1a3)]&&(this['_echartsContainer']['style'][_0x14d073(0x1be)]=_0x189ae3);}[_0xd12b9e(0x196)](){const _0x9c9e7a={_0x247ffc:0x193,_0x1f327e:0x19f,_0x494c64:0x1be,_0xfa2935:0x1cc,_0x453a7f:0x1bf},_0x2398b8=_0xd12b9e,_0x5be7f5=this['_map']['getSize'](),_0x38ebb6=document[_0x2398b8(_0x9c9e7a._0x247ffc)]('div');_0x38ebb6['style']['position']=_0x2398b8(0x1c3),_0x38ebb6['style']['top']='0px',_0x38ebb6[_0x2398b8(_0x9c9e7a._0x1f327e)]['left']=_0x2398b8(0x1c8),_0x38ebb6['style']['height']=_0x5be7f5['y']+'px',_0x38ebb6['style']['width']=_0x5be7f5['x']+'px',_0x38ebb6['style'][_0x2398b8(_0x9c9e7a._0x494c64)]=this[_0x2398b8(0x1cf)]['zIndex']||0x63;const _0x3c341c=this[_0x2398b8(_0x9c9e7a._0xfa2935)][_0x2398b8(0x1c1)](this['options']['pane']||_0x2398b8(_0x9c9e7a._0x453a7f));return _0x3c341c['appendChild'](_0x38ebb6),_0x38ebb6;}['_resizeHandler'](_0x4d5f7a){const _0x29aa2e={_0x18fe41:0x1a3,_0x5f2b5f:0x1a3},_0x38426b=_0xd12b9e;if(!this['_echartsInstance'])return;const _0x43855e=_0x4d5f7a['newSize'];this[_0x38426b(_0x29aa2e._0x18fe41)]['style']['width']=_0x43855e['x']+'px',this[_0x38426b(_0x29aa2e._0x5f2b5f)]['style']['height']=_0x43855e['y']+'px',this[_0x38426b(0x1cb)]['resize']();}['setEchartsOption'](_0x4be3e0,_0x13ee38,_0xec00f3){const _0x4036e4={_0x1cebef:0x1a5},_0x537fff=_0xd12b9e;this['_echartsInstance']&&(_0x4be3e0['mars2dMap']=_0x4be3e0['mars2dMap']||{'roam':!![]},this['_echartsInstance'][_0x537fff(_0x4036e4._0x1cebef)](_0x4be3e0,_0x13ee38,_0xec00f3));}}mars2d__namespace['layer'][_0xd12b9e(0x1ac)]=EchartsLayer,mars2d__namespace['LayerUtil'][_0xd12b9e(0x1b5)](_0xd12b9e(0x1cd),EchartsLayer),exports['EchartsLayer']=EchartsLayer,Object[_0xd12b9e(0x1a8)](exports,'__esModule',{'value':!![]});
}));
